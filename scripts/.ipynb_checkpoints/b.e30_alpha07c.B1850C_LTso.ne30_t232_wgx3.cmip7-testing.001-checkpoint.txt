
# ======================================================
# b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001
# ====================================================== 

# This is not a script yet. This is a starting point to develop the script and identify the missing steps.

########################
## connect as cmip7 user
########################
sudox cmip7

########################
## Clone the repository
########################
cd /glade/u/home/cmip7/cesm_tags

# get the cesm tag
git clone https://github.com/ESCOMP/cesm cesm3_0_alpha07c
cd cesm3_0_alpha07c

# check out the tag
git checkout  cesm3_0_alpha07c
./bin/git-fleximod update


# ***** TO DO *****
# cesm3_0_alpha07c doesn't have everything we need. We need to wait for  cesm3_0_alpha07d
# we want to put the tags in: /glade/work/cmip7/cesm_tags instead of /glade/u/home/cmip7/cesm_tags 

########################
## Create new case
########################
cd /glade/u/home/cmip7/cesm_tags/cesm3_0_alpha07c/cime/scripts
./create_newcase --compset B1850C_LTso --res ne30pg3_t232_wg37 \
--case /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001  \
--run-unsupported  --project CESM0024

# ***** TO DO *****
# jim will create something like --workflow   

########################
## Set up 
########################
cd /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001  
/bin/cp /glade/campaign/cesm/cesmdata/cseg/runs/cesm2_0/b.e30_beta06.B1850C_LTso.ne30_t232_wgx3.166/env_mach_pes.xml .
./case.setup

# ***** TO DO *****
# needs to get the pe_layout out of the box 
# 

########################
## namelists
########################
 
/glade/work/cmip7/cesm_tags/cesm3.0-alphabranch/cime_config/usermods_dirs
/glade/work/cmip7/cesm_tags/cesm3.0-alphabranch/components/cam/cime_config/usermods_dirs/CMIP6_B1850

# ***** TO DO *****
# needs to have usermods_dirs CMIP6_B1850 
# ./create_newcase --user-mods-dir /glade/work/cmip7/cesm_tags/cesm3.0-alphabranch/components/cam/cime_config/usermods_dirs/CMIP6_B1850

cd /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001

### user_nl_cam

cat <<EOF>! user_nl_cam
mfilt               =       0,       5,     20,      40,   
nhtfrq              =       0,     -24,     -6,      -3,      
ndens               =       2,       2,      2,       2,      
interpolate_output  =  .false.,  .false., .false.,  .false.

empty_htapes = .true.

fincl1 = 'ACTNL', 'ACTREL', 'AOA1', 'AOA_NH', 'AODABSdn', 'AODBCdn', 'AODdnDUST1', 'AODdnDUST2', 'AODdnDUST3', 'AODPOMdn', 'AODSO4dn', 'AODSOAdn', 'AODSS', 'AODVISdn', 'AREA', 
'AREI', 'AREL', 'bc_a1', 'bc_a1DDF', 'bc_a1SFWET', 'bc_a4', 'bc_a4DDF', 'bc_a4SFWET', 'bc_c1DDF', 'bc_c1SFWET', 'bc_c4DDF', 'bc_c4SFWET', 'BRY', 'BURDENSO4dn', 'BUTGWSPEC', 
'C2H6', 'C3H6', 'C3H8', 'CDNUMC', 'CH2O', 'CH3COCH3', 'CH4', 'CH4_CHML', 'ch4vmr', 'CLD_CAL', 'CLDHGH_CAL', 'CLDICE', 'CLDICECON', 'CLDICESTR', 'CLDLIQ', 'CLDLIQCON', 
'CLDLIQSTR', 'CLDLOW_CAL', 'CLDMED_CAL', 'CLD_MISR', 'CLDTOT', 'CLDTOT_CAL', 'CLDTOT_ISCCP', 'CLOUD', 'CLY', 'CME', 'CMFDQ', 'CMFDT', 'CMFMC', 'CMFMCDZM', 'CO', 'CO2', 
'co2vmr', 'CO_CHML', 'column', 'CONCLD', 'DF_ALKNIT', 'DF_HNO3', 'DF_HO2NO2', 'DF_HONITR', 'DF_ISOPNITA', 'DF_ISOPNITB', 'DF_NH3', 'DF_NH4', 'DF_NO', 'DF_NO2', 'DF_NOA', 
'DF_O3', 'DF_ONITR', 'DF_PAN', 'DF_SO2', 'DF_TERPNIT', 'DMS', 'DQSED', 'dst_a1', 'dst_a1DDF', 'dst_a1SFWET', 'dst_a2', 'dst_a2DDF', 'dst_a2SFWET', 'dst_a3', 'dst_a3DDF', 
'dst_a3SFWET', 'dst_c1DDF', 'dst_c1SFWET', 'dst_c2DDF', 'dst_c2SFWET', 'dst_c3DDF', 'dst_c3SFWET', 'DTCORE', 'EFLX_LH_TOT', 'EFLX_LH_TOT_ICE', 'EVAPPREC', 'EVAPQZM', 
'EVAPTZM', 'f11vmr', 'f12vmr', 'FCTL', 'FISCCP1_COSP', 'FLDS', 'FLDSC', 'FLNS', 'FLNT', 'FLUC', 'FLUT', 'FLUTC', 'FREQI', 'FREQL', 'FREQZM', 'FSA', 'FSCSC', 'FSDS', 
'FSDSC', 'FSH_ICE', 'FSNS', 'FSNSC', 'FSNT', 'FSNTOA', 'FSNTOAC', 'FSR_ICE', 'FSUTOA', 'HCL', 'HNO3', 'HO2', 'ISOP', 'jno2', 'jo3_a', 'KVH_CLUBB', 'LHFLX', 'LNO_PROD', 
'MASS', 'MEANCLDALB_ISCCP', 'MEANPTOP_ISCCP', 'MEG_BCARY', 'MEG_BIGALK', 'MEG_BIGENE', 'MEG_C2H4', 'MEG_C2H5OH', 'MEG_C2H6', 'MEG_C3H6', 'MEG_C3H8', 'MEG_CH2O', 'MEG_CH3CHO', 
'MEG_CH3COCH3', 'MEG_CH3COOH', 'MEG_CH3OH', 'MEG_CO', 'MEG_HCN', 'MEG_HCOOH', 'MEG_ISOP', 'MEG_MTERP', 'MEG_TOLUENE', 'N2O', 'N2O_CHML', 'n2ovmr', 'ncl_a1', 'ncl_a1DDF', 
'ncl_a1SFWET', 'ncl_a2', 'ncl_a2DDF', 'ncl_a2SFWET', 'ncl_a3', 'ncl_a3DDF', 'ncl_c1', 'ncl_c1DDF', 'ncl_c1SFWET', 'ncl_c2', 'ncl_c2DDF', 'ncl_c2SFWET', 'ncl_c3', 
'ncl_c3DDF', 'ncl_c3SFWET', 'NH4', 'NH_50', 'NO', 'NO2', 'NO2_CLXF', 'NO2_SRF', 'NOY', 'num_a1', 'num_a2', 'num_a3', 'num_a4', 'NUMLIQ', 'O3', 'O3_Loss', 'O3_Prod', 
'O3S', 'O3_SRF', 'OH', 'OMEGA', 'PAN', 'PBLH', 'PM25', 'PM25_SRF', 'pom_a1', 'pom_a1DDF', 'pom_a1SFWET', 'pom_a4', 'pom_a4DDF', 'pom_a4SFWET', 'pom_c1DDF', 'pom_c1SFWET', 
'pom_c4DDF', 'pom_c4SFWET', 'PRECC', 'PRECT', 'PS', 'PSL', 'PTEQ', 'PTTEND', 'Q', 'QAP', 'QFLX', 'QFLX_EVAP_TOT', 'QREFHT', 'QRL', 'QRLC', 'QRS', 'QRSC', 'QSNOW', 'RAIN', 
'RAIN_ICE', 'RELHUM', 'RHREFHT', 'SFbc_a4', 'SFBENZENE', 'SFBIGALK', 'SFBIGENE', 'SFC2H2', 'SFC2H4', 'SFC2H5OH', 'SFC2H6', 'SFC3H6', 'SFC3H8', 'SFCH2O', 'SFCH3CHO', 
'SFCH3COCH3', 'SFCH3COCHO', 'SFCH3COOH', 'SFCH3OH', 'SFCO', 'SFDMS', 'SFdst_a1', 'SFdst_a2', 'SFdst_a3', 'SFGLYALD', 'SFHCOOH', 'SFISOP', 'SFMEF', 'SFMTERP', 'SFncl_a1', 
'SFncl_a2', 'SFncl_a3', 'SFNH3', 'SFNO', 'SFNO2', 'SFpom_a4', 'SFSO2', 'SFso4_a1', 'SFso4_a2', 'SFTOLUENE', 'SFXYLENES', 'SHFLX', 'SNOW', 'SO2', 'SO2_CLXF', 'so4_a1', 
'so4_a1_CLXF', 'so4_a1DDF', 'so4_a1_sfgaex1', 'so4_a1SFWET', 'so4_a2', 'so4_a2_CLXF', 'so4_a2DDF', 'so4_a2_sfgaex1', 'so4_a2SFWET', 'so4_a3', 'so4_a3DDF', 'so4_a3_sfgaex1', 
'so4_a3SFWET', 'so4_c1AQH2SO4', 'so4_c1AQSO4', 'so4_c1DDF', 'so4_c1SFWET', 'so4_c2AQH2SO4', 'so4_c2AQSO4', 'so4_c2DDF', 'so4_c2SFWET', 'so4_c3AQH2SO4', 'so4_c3AQSO4', 
'so4_c3DDF', 'so4_c3SFWET', 'soa1_a1', 'soa1_a1_sfgaex1', 'soa1_a2', 'soa1_a2_sfgaex1', 'soa2_a1', 'soa2_a1_sfgaex1', 'soa2_a2', 'soa2_a2_sfgaex1', 'soa3_a1', 'soa3_a1_sfgaex1', 
'soa3_a2', 'soa3_a2_sfgaex1', 'soa4_a1', 'soa4_a1_sfgaex1', 'soa4_a2', 'soa4_a2_sfgaex1', 'soa5_a1', 'soa5_a1_sfgaex1', 'soa5_a2', 'soa5_a2_sfgaex1', 'soa_a1DDF', 'soa_a1_sfgaex1', 
'soa_a1SFWET', 'soa_a2DDF', 'soa_a2_sfgaex1', 'soa_a2SFWET', 'soa_c1DDF', 'soa_c1SFWET', 'soa_c2DDF', 'soa_c2SFWET', 'SOLIN', 'SOLLD', 'SOLSD', 'T', 'TAQ', 'TAUBLJX', 'TAUBLJY', 
'TAUGWX', 'TAUGWY', 'TAUX', 'TAUY', 'TGCLDIWP', 'TGCLDLWP', 'TG_ICE', 'THzm', 'TMO3', 'TMQ', 'TOT_CLD_VISTAU', 'TREFHT', 'TREFHTMN', 'TREFHTMX', 'TROP_P', 'TROP_T', 'TROP_Z', 
'TS', 'TTEND_TOT', 'TTGWORO', 'TTGWSPEC', 'U', 'U10', 'UTGWORO', 'UTGWSPEC', 'UVzm', 'UWzm', 'Uzm', 'V', 'VD01', 'VTHzm', 'Vzm', 'WD_NH3', 'WD_NH4', 'WD_NOY', 'WD_SO2', 
'Wzm', 'Z3', 'ZMDQ', 'ZMDT', 'ZMMTT', 'ZMMU'

# daily
fincl2 = 'ACTNL', 'ACTREL', 'AODVISdn', 'bc_a1', 'bc_a4', 'BURDENBCdn', 'BURDENDUSTdn', 'BURDENPOMdn', 'BURDENSEASALTdn', 'BURDENSO4dn', 'BURDENSOAdn', 'BUTGWSPEC', 'CDNUMC', 
'CLD_CAL', 'CLDHGH_CAL', 'CLDICE', 'CLDLIQ', 'CLDLOW_CAL', 'CLDMED_CAL', 'CLDTOT', 'CLDTOT_CAL', 'CLDTOT_ISCCP', 'CLOUD', 'CO', 'DF_ALKNIT', 'DF_HNO3', 'DF_HO2NO2', 'DF_HONITR', 
'DF_ISOPNITA', 'DF_ISOPNITB', 'DF_NH3', 'DF_NH4', 'DF_NO', 'DF_NO2', 'DF_NOA', 'DF_ONITR', 'DF_PAN', 'DF_TERPNIT', 'dst_a1', 'dst_a2', 'dst_a3', 'EFLX_LH_TOT', 'EFLX_LH_TOT_ICE', 
'FCTL', 'FISCCP1_COSP', 'FLASHFRQ', 'FLDS', 'FLDSC', 'FLNS', 'FLUC', 'FLUT', 'FLUTC', 'FSA', 'FSCSC', 'FSDS', 'FSDSC', 'FSH_ICE', 'FSNS', 'FSNSC', 'FSNTOA', 'FSNTOAC', 'FSR_ICE', 
'FSUTOA', 'LHFLX', 'MEANCLDALB_ISCCP', 'MEANPTOP_ISCCP', 'ncl_a1', 'ncl_a2', 'ncl_a3', 'ncl_c1', 'ncl_c2', 'ncl_c3', 'NH4', 'O3_SRF', 'OMEGA', 'OMEGA500', 'PM25_SRF', 'pom_a1', 
'pom_a4', 'PR', 'PRECC', 'PRECT', 'PS', 'PSIRS', 'PSL', 'PTTEND', 'Q', 'QFLX', 'QFLX_EVAP_TOT', 'QFLX_SNOW_DRAIN', 'QREFHT', 'QRL', 'QRS', 'QSNOFRZ', 'QSNOW', 'RAIN', 'RAIN_ICE', 
'RELHUM', 'RHREFHT', 'SHFLX', 'SNOCAN', 'SNOW', 'SO2', 'so4_a1', 'so4_a2', 'so4_a3', 'soa1_a1', 'soa1_a2', 'soa2_a1', 'soa2_a2', 'soa3_a1', 'soa3_a2', 'soa4_a1', 'soa4_a2', 'soa5_a1', 
'soa5_a2', 'SOLIN', 'SOLLD', 'SOLSD', 'T', 'T700', 'T850', 'TAUBLJX', 'TAUBLJY', 'TAUGWX', 'TAUGWY', 'TAUX', 'TAUY', 'TGCLDIWP', 'TGCLDLWP', 'THzm', 'TMO3', 'TMQ', 'TOT_CLD_VISTAU', 
'TREFHT', 'TREFHTMN', 'TREFHTMX', 'TREFMNAV', 'TREFMXAV', 'TS', 'U', 'U10', 'UTGWORO', 'UTGWSPEC', 'UVzm', 'UWzm', 'Uzm', 'V', 'VTHzm', 'Vzm', 'WD_NH3', 'WD_NH4', 'WD_NOY', 'Wzm', 
'Z1000', 'Z3', 'Z500', 'ZMFLXSNW'


# 6 hourly
fincl3 = 'FLDS', 'FSDS', 'PRECT', 'PSL', 'PS', 'QREFHT', 'RAIN', 'SNOW', 'RHREFHT', 'SNOW', 'TMQ', 'TREFHT', 'TS', 'U', 'U10', 'V', 'Z1000', 'Z3', 'Z500', 'Z700', 'Z925', 
'PRECTMX', 'RELHUM100', 'RELHUM500', 'RELHUM850', 'Q', 'UREFHT', 'VREFHT'

# 3 hourly
fincl4 = 'QREFHT', 'PRECT', 'SNOW', 'PS', 'FLDS', 'FSDS', 'TREFHT', 'RHREFHT', 'num_a1', 'num_a2', 'num_a3', 'num_a4', 'bc_a1', 'bc_a4', 'dst_a1', 'dst_a2', 'dst_a3', 
'NH4', 'pom_a1', 'pom_a4', 'soa1_a1', 'soa1_a2', 'soa2_a1', 'soa2_a2', 'soa3_a1', 'soa3_a2', 'soa4_a1', 'soa4_a2', 'soa5_a1', 'soa5_a2', 'so4_a1', 'so4_a2', 'so4_a3', 
'ncl_a1', 'ncl_a2', 'ncl_a3', 'ncl_c1', 'ncl_c2', 'ncl_c3', 'SO2', 'U10'

bnd_topo = "/glade/campaign/cgd/amp/pel/topo/cesm3/ne30pg3_gmted2010_modis_bedmachine_nc3000_Laplace0100_noleak_greendlndantarcsgh30fac2.50_20250708.nc"

ext_frc_specifier = 'bc_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/bc_a4-em-AIR-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'num_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/num_bc_a4-em-AIR-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'SO2 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/SO2-em-AIR-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'so4_a1 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/so4_a1_ene_vertical-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'num_a1 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/num_so4_a1_ene_vertical-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'num_a1 -> /glade/campaign/cesm/cesmdata/inputdata/atm/cam/chem/emis/historical_ne30pg3/emissions-cmip6_num_a1_so4_contvolcano_vertical_850-5000_ne30pg3_c20200125.nc',
         'num_a2 -> /glade/campaign/cesm/cesmdata/inputdata/atm/cam/chem/emis/historical_ne30pg3/emissions-cmip6_num_a2_so4_contvolcano_vertical_850-5000_ne30pg3_c20200125.nc',
         'so4_a1 -> /glade/campaign/cesm/cesmdata/inputdata/atm/cam/chem/emis/historical_ne30pg3/emissions-cmip6_so4_a1_contvolcano_vertical_850-5000_ne30pg3_c20200125.nc',
         'so4_a2 -> /glade/campaign/cesm/cesmdata/inputdata/atm/cam/chem/emis/historical_ne30pg3/emissions-cmip6_so4_a2_contvolcano_vertical_850-5000_ne30pg3_c20200125.nc',
         'SO2 -> /glade/campaign/cesm/cesmdata/inputdata/atm/cam/chem/emis/historical_ne30pg3/emissions-cmip6_SO2_contvolcano_vertical_850-5000_ne30pg3_c20200125.nc',

srf_emis_specifier = 'bc_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/bc_a4-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'bc_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/bc_a4_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'pom_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/pom_a4-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'pom_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/pom_a4_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'num_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/num_bc_a4-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'num_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/num_bc_a4_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'num_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/num_pom_a4-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'num_a4 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/num_pom_a4_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'num_a1-> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/num_so4_a1_ag-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'num_a1-> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/num_so4_a1_ship_slv-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'num_a2-> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/num_so4_a2_res_trs-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'so4_a1-> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/so4_a1_ag_ship_slv-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'so4_a2-> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/so4_a2_res_trs-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'so4_a1-> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/SO4_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'num_a1-> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/num_SO4_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SO2 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/SO2-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'SO2 -> /glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/SO2_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SOAE -> 0.5954D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/ISOP_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SOAE -> 2.5592D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/BENZENE_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SOAE -> 2.5592D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/BENZENE-VOC-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18-supplemental_gn_175001-202312.nc',
         'SOAE -> 8.5371D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/IVOC_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SOAE -> 8.5371D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/IVOC-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'SOAE -> 16.650D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/SVOC_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SOAE -> 16.650D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/SVOC-em-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18_gn_175001-202312.nc',
         'SOAE -> 8.2367D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/TOLUENE_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SOAE -> 8.2367D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/TOLUENE-VOC-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18-supplemental_gn_175001-202312.nc',
         'SOAE -> 6.5013D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/XYLENES_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc',
         'SOAE -> 6.5013D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/CEDS-CMIP-2025-04-18/XYLENES-VOC-anthro_input4MIPs_emissions_CMIP_CEDS-CMIP-2025-04-18-supplemental_gn_175001-202312.nc',
         'SOAE -> 5.1004D0*/glade/campaign/acom/MUSICA/emis/cmip7/ne30/DRES-CMIP-BB4CMIP7-2-0_smoothed/MTERP_smoothed_input4MIPs_emissions_CMIP_DRES-CMIP-BB4CMIP7-2-0_gn_175001-202112.nc'
EOF


cd /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001

cat <<EOF>! user_nl_clm
fsurdat = '/glade/campaign/cesm/cesmdata/inputdata/lnd/clm2/surfdata_esmf/ctsm5.3.0/surfdata_ne30np4.pg3_hist_1850_78pfts_c240908.nc'
snow_thermal_cond_lake_method = 'Jordan1991'
use_init_interp = .true.
reseed_dead_plants = .true.
EOF


cat <<EOF>! user_nl_cpl
histaux_l2x1yrg = .true.
EOF


cd /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001  
cat <<EOF>! user_nl_cice
EOF

cd /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001
cat <<EOF>! user_nl_mom
EOF


mkdir -p /glade/derecho/scratch/hannay/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001/run/INPUT
cd /glade/derecho/scratch/hannay/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001/run/INPUT
ln -s /glade/derecho/scratch/gmarques/for_cecile/198/INPUT/* .

cd /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001
./preview_namelists


########################
## timeseries
########################

=> the timeseries will be part of pf the workflow 

########################
## CUPID
########################


########################
## CMORization
########################

RIght now Jim needs to separate all the time frequency (monthly, daily, etc) in different directories. 

########################
## build and submit
########################

cd /glade/u/home/cmip7/cases/b.e30_alpha07c.B1850C_LTso.ne30_t232_wgx3.cmip7-testing.001
./xmlchange JOB_PRIORITY=regular
./xmlchange PROJECT=CESM0023,RESUBMIT=2,STOP_N=4,STOP_OPTION=nyears
./xmlchange REST_OPTION=nyears,REST_N=1
./xmlchange JOB_WALLCLOCK_TIME=12:00:00  --subgroup case.run
qcmd -A CESM0023 -- ./case.build
./case.submit

